<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>LexicMap: efficient sequence alignment against millions of prokaryotic genomes​</title>
    <link>https://bioinf.shenwei.me/LexicMap/</link>
    <description>Recent content on LexicMap: efficient sequence alignment against millions of prokaryotic genomes​</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://bioinf.shenwei.me/LexicMap/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Indexing GTDB</title>
      <link>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-gtdb/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-gtdb/</guid>
      <description>Tools:&#xA;https://github.com/pirovc/genome_updater, for downloading genomes https://github.com/shenwei356/seqkit, for checking sequence files https://github.com/shenwei356/rush, for running jobs Data:&#xA;time genome_updater.sh -d &amp;quot;refseq,genbank&amp;quot; -g &amp;quot;archaea,bacteria&amp;quot; \ -f &amp;quot;genomic.fna.gz&amp;quot; -o &amp;quot;GTDB_complete&amp;quot; -M &amp;quot;gtdb&amp;quot; -t 12 -m -L curl cd GTDB_complete/2024-01-30_19-34-40/ # ----------------- check the file integrity ----------------- genomes=files # corrupted files # find $genomes -name &amp;quot;*.gz&amp;quot; \ fd &amp;quot;.gz$&amp;quot; $genomes \ | rush --eta &#39;seqkit seq -w 0 {} &amp;gt; /dev/null; if [ $? -ne 0 ]; then echo {}; fi&#39; \ &amp;gt; failed.</description>
    </item>
    <item>
      <title>masks</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/masks/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/masks/</guid>
      <description>$ lexicmap utils masks -h View masks of the index or generate new masks randomly Usage: lexicmap utils masks [flags] { -d &amp;lt;index path&amp;gt; | [-k &amp;lt;k&amp;gt;] [-n &amp;lt;masks&amp;gt;] [-s &amp;lt;seed&amp;gt;] } [-o out.tsv.gz] Flags: -h, --help help for masks -d, --index string ► Index directory created by &amp;#34;lexicmap index&amp;#34;. -k, --kmer int ► Maximum k-mer size. K needs to be &amp;lt;= 32. (default 31) -m, --masks int ► Number of masks.</description>
    </item>
    <item>
      <title>Indexing GenBank&#43;RefSeq</title>
      <link>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-genbank/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-genbank/</guid>
      <description>Tools:&#xA;https://github.com/pirovc/genome_updater, for downloading genomes https://github.com/shenwei356/seqkit, for checking sequence files https://github.com/shenwei356/rush, for running jobs Data:&#xA;time genome_updater.sh -d &amp;quot;refseq,genbank&amp;quot; -g &amp;quot;archaea,bacteria&amp;quot; \ -f &amp;quot;genomic.fna.gz&amp;quot; -o &amp;quot;genbank&amp;quot; -M &amp;quot;ncbi&amp;quot; -t 12 -m -L curl cd genbank/2024-02-15_11-00-51/ # ----------------- check the file integrity ----------------- genomes=files # corrupted files # find $genomes -name &amp;quot;*.gz&amp;quot; \ fd &amp;quot;.gz$&amp;quot; $genomes \ | rush --eta &#39;seqkit seq -w 0 {} &amp;gt; /dev/null; if [ $? -ne 0 ]; then echo {}; fi&#39; \ &amp;gt; failed.</description>
    </item>
    <item>
      <title>kmers</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/kmers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/kmers/</guid>
      <description>$ lexicmap utils kmers -h View k-mers captured by the masks Attention: 1. Mask index (column mask) is 1-based. 2. Prefix means the length of shared prefix between a k-mer and the mask. 3. K-mer positions (column pos) are 1-based. For reference genomes with multiple sequences, the sequences were concatenated to a single sequence with intervals of N&amp;#39;s. 4. Reversed means if the k-mer is reversed for suffix matching. Usage: lexicmap utils kmers [flags] -d &amp;lt;index path&amp;gt; [-m &amp;lt;mask index&amp;gt;] [-o out.</description>
    </item>
    <item>
      <title>Step 2. Searching</title>
      <link>https://bioinf.shenwei.me/LexicMap/tutorials/search/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/tutorials/search/</guid>
      <description>Table of contents Table of contents TL;DR Input Hardware requirements Algorithm Parameters Improving searching speed Steps Output Alignment result relationship Output format Examples Summarizing results TL;DR Build a LexicMap index.&#xA;Run:&#xA;For short queries like genes or long reads, returning top N hits.&#xA;lexicmap search -d db.lmi query.fasta -o query.fasta.lexicmap.tsv \ --min-qcov-per-hsp 70 --min-qcov-per-genome 70 --top-n-genomes 1000 For longer queries like plasmids, returning all hits.&#xA;lexicmap search -d db.lmi query.</description>
    </item>
    <item>
      <title>Indexing AllTheBacteria</title>
      <link>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-allthebacteria/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-allthebacteria/</guid>
      <description>Downloading assemblies tarballs here (except these starting with unknown__) to a directory (like assemblies): https://ftp.ebi.ac.uk/pub/databases/AllTheBacteria/Releases/0.2/assembly/&#xA;Decompressing all tarballs.&#xA;cd assemblies; ls *.tar.xz | parallel --eta &#39;tar -Jxf {}; gzip {}/*.fa&#39; cd .. After that, the assemblies directory would have multiple subdirectories. When you give the directory to lexicmap index -I, it can recursively scan (plain or gz/xz/zstd-compressed) genome files.&#xA;Creating a LexicMap index. (more details: https://bioinf.shenwei.me/LexicMap/tutorials/index/)&#xA;lexicmap index -I assemblies/ -O atb.</description>
    </item>
    <item>
      <title>genomes</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/genomes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/genomes/</guid>
      <description>Usage $ lexicmap utils genomes -h View genome IDs in the index Usage: lexicmap utils genomes [flags] Flags: -h, --help help for genomes -d, --index string ► Index directory created by &amp;#34;lexicmap index&amp;#34;. -o, --out-file string ► Out file, supports the &amp;#34;.gz&amp;#34; suffix (&amp;#34;-&amp;#34; for stdout). (default &amp;#34;-&amp;#34;) Global Flags: -X, --infile-list string ► File of input file list (one file per line). If given, they are appended to files from CLI arguments.</description>
    </item>
    <item>
      <title>Indexing GlobDB</title>
      <link>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-globdb/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/tutorials/misc/index-globdb/</guid>
      <description># download data wget https://fileshare.lisc.univie.ac.at/globdb/globdb_r220/globdb_r220_genome_fasta.tar.gz tar -zxf globdb_r220_genome_fasta.tar.gz # file list find globdb_r220_genome_fasta/ -name &amp;quot;*.fa.gz&amp;quot; &amp;gt; files.txt # index with lexicmap # elapsed time: 3h:40m:38s # peak rss: 87.15 GB lexicmap index -S -X files.txt -O globdb_r220.lmi --log globdb_r220.lmi -g 50000000 </description>
    </item>
    <item>
      <title>search</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/search/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/search/</guid>
      <description>$ lexicmap search -h Search sequences against an index Attention: 1. Input should be (gzipped) FASTA or FASTQ records from files or stdin. 2. For multiple queries, the order of queries might be different from the input. Tips: 1. When using -a/--all, the search result would be formatted to Blast-style format with &amp;#39;lexicmap utils 2blast&amp;#39;. And the search speed would be slightly slowed down. 2. Alignment result filtering is performed in the final phase, so stricter filtering criteria, including -q/--min-qcov-per-hsp, -Q/--min-qcov-per-genome, and -i/--align-min-match-pident, do not significantly accelerate the search speed.</description>
    </item>
    <item>
      <title>subseq</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/subseq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/subseq/</guid>
      <description>Usage $ lexicmap utils subseq -h Exextract subsequence via reference name, sequence ID, position and strand Attention: 1. The option -s/--seq-id is optional. 1) If given, the positions are these in the original sequence. 2) If not given, the positions are these in the concatenated sequence. 2. All degenerate bases in reference genomes were converted to the lexicographic first bases. E.g., N was converted to A. Therefore, consecutive A&amp;#39;s in output might be N&amp;#39;s in the genomes.</description>
    </item>
    <item>
      <title>seed-pos</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/seed-pos/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/seed-pos/</guid>
      <description>Usage $ lexicmap utils seed-pos -h Extract and plot seed positions via reference name(s) Attention: 0. This command requires the index to be created with the flag --save-seed-pos in lexicmap index. 1. Seed/K-mer positions (column pos) are 1-based. For reference genomes with multiple sequences, the sequences were concatenated to a single sequence with intervals of N&amp;#39;s. So values of column pos_gnm and pos_seq might be different. The positions can be used to extract subsequence with &amp;#39;lexicmap utils subseq&amp;#39;.</description>
    </item>
    <item>
      <title>reindex-seeds</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/reindex-seeds/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/reindex-seeds/</guid>
      <description>Usage $ lexicmap utils reindex-seeds -h Recreate indexes of k-mer-value (seeds) data Usage: lexicmap utils reindex-seeds [flags] Flags: -h, --help help for reindex-seeds -d, --index string ► Index directory created by &amp;#34;lexicmap index&amp;#34;. --partitions int ► Number of partitions for re-indexing seeds (k-mer-value data) files. The value needs to be the power of 4. (default 1024) Global Flags: -X, --infile-list string ► File of input file list (one file per line).</description>
    </item>
    <item>
      <title>2blast</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/utils/2blast/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/utils/2blast/</guid>
      <description>Usage $ lexicmap utils 2blast -h Convert the default search output to blast-style format LexicMap only stores genome IDs and sequence IDs, without description information. But the option -g/--kv-file-genome enables adding description data after the genome ID with a tabular key-value mapping file. Input: - Output of &amp;#39;lexicmap search&amp;#39; with the flag -a/--all. Usage: lexicmap utils 2blast [flags] Flags: -b, --buffer-size string ► Size of buffer, supported unit: K, M, G.</description>
    </item>
    <item>
      <title>lexicmap</title>
      <link>https://bioinf.shenwei.me/LexicMap/usage/lexicmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/usage/lexicmap/</guid>
      <description>$ lexicmap -h LexicMap: efficient sequence alignment against millions of prokaryotic genomes Version: v0.4.0 Documents: https://bioinf.shenwei.me/LexicMap Source code: https://github.com/shenwei356/LexicMap Usage: lexicmap [command] Available Commands: autocompletion Generate shell autocompletion scripts index Generate an index from FASTA/Q sequences search Search sequences against an index utils Some utilities version Print version information and check for update Flags: -h, --help help for lexicmap -X, --infile-list string ► File of input file list (one file per line).</description>
    </item>
    <item>
      <title>Motivation</title>
      <link>https://bioinf.shenwei.me/LexicMap/notes/motivation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://bioinf.shenwei.me/LexicMap/notes/motivation/</guid>
      <description>BLASTN is not able to scale to millions of bacterial genomes, it&amp;rsquo;s slow and has a high memory occupation. For example, it requires &amp;gt;2000 GB for alignment a 2-kb gene sequence against all the 2.34 millions of prokaryotics genomes in Genbank and RefSeq.&#xA;Large-scale sequence searching tools only return which genomes a query matches (color), but they can&amp;rsquo;t return positional information.</description>
    </item>
  </channel>
</rss>
